# Project Structure

This document describes the organized structure of the Binance Trading Bot project.

## Directory Structure

```
binance-bot/
├── app/                          # Main application package
│   ├── __init__.py
│   ├── main.py                   # FastAPI application entry point
│   │
│   ├── api/                      # API layer
│   │   ├── __init__.py
│   │   ├── deps.py               # FastAPI dependencies
│   │   └── routes/               # API route handlers
│   │       ├── __init__.py
│   │       ├── health.py         # Health check endpoints
│   │       └── strategies.py     # Strategy management endpoints
│   │
│   ├── core/                     # Core functionality
│   │   ├── config.py             # Configuration management
│   │   ├── logger.py             # Logging configuration
│   │   ├── my_binance_client.py  # Binance API client
│   │   └── redis_storage.py      # Redis storage layer
│   │
│   ├── models/                   # Data models (renamed from schemas)
│   │   └── strategy.py           # Strategy-related Pydantic models
│   │
│   ├── services/                 # Business logic services
│   │   ├── order_executor.py     # Order execution service
│   │   └── strategy_runner.py    # Strategy execution service
│   │
│   ├── strategies/                # Trading strategies
│   │   ├── __init__.py
│   │   ├── base.py               # Base strategy class
│   │   ├── scalping.py           # EMA scalping strategy
│   │   └── trailing_stop.py      # Trailing stop manager
│   │
│   └── risk/                     # Risk management
│       └── manager.py            # Risk management logic
│
├── tests/                        # Test suite
│   ├── __init__.py
│   ├── conftest.py               # Pytest configuration
│   ├── test_critical_functions.py
│   ├── test_health.py
│   ├── test_order_execution.py
│   ├── test_strategy_integration.py
│   ├── test_strategy_scalping.py
│   └── test_trailing_stop.py
│
├── docs/                         # Documentation
│   ├── API_USAGE.md              # API usage guide
│   ├── STRATEGY_PARAMETERS_MANUAL.md
│   ├── TRAILING_STOP_GUIDE.md
│   ├── TRAILING_STOP_ACTIVATION_EXAMPLE.md
│   ├── CANDLESTICK_DATA_EXAMPLE.md
│   ├── POSITION_CREATION_EXPLANATION.md
│   └── VIEW_LOGS.md
│
├── scripts/                      # Utility scripts
│   ├── check_redis.py
│   ├── diagnose_redis_issue.py
│   ├── test_redis_integration.py
│   ├── test_redis_warning_fix.py
│   └── view_candles_example.py
│
├── logs/                         # Application logs
│   └── bot.log
│
├── .env                          # Environment variables (gitignored)
├── .env.example                  # Environment variables template
├── .gitignore
├── README.md                     # Main project documentation
├── requirements.txt              # Python dependencies
├── pyproject.toml                # Project configuration
└── PROJECT_STRUCTURE.md          # This file

```

## Module Organization Principles

### 1. **Separation of Concerns**
- **API Layer** (`app/api/`): Handles HTTP requests/responses
- **Services** (`app/services/`): Business logic and orchestration
- **Core** (`app/core/`): Infrastructure (config, clients, storage)
- **Models** (`app/models/`): Data structures and validation
- **Strategies** (`app/strategies/`): Trading strategy implementations
- **Risk** (`app/risk/`): Risk management logic

### 2. **Dependency Flow**
```
API Routes → Services → Core/Strategies → External APIs
```

### 3. **Test Organization**
- Tests mirror the `app/` structure
- Each module has corresponding test file
- Integration tests in `test_strategy_integration.py`

### 4. **Documentation**
- User-facing docs in `docs/`
- Code documentation via docstrings
- API docs auto-generated by FastAPI

## Naming Conventions

- **Modules**: `snake_case` (e.g., `strategy_runner.py`)
- **Classes**: `PascalCase` (e.g., `StrategyRunner`)
- **Functions**: `snake_case` (e.g., `get_klines`)
- **Constants**: `UPPER_SNAKE_CASE` (e.g., `MAX_LEVERAGE`)
- **Private**: `_leading_underscore` (e.g., `_run_loop`)

## Adding New Components

### Adding a New Strategy
1. Create file in `app/strategies/`
2. Inherit from `Strategy` base class
3. Register in `app/services/strategy_runner.py`
4. Add tests in `tests/test_strategy_*.py`

### Adding a New API Endpoint
1. Add route handler in `app/api/routes/`
2. Add dependency in `app/api/deps.py` if needed
3. Register route in `app/main.py`
4. Add tests in `tests/test_*.py`

### Adding a New Service
1. Create file in `app/services/`
2. Follow dependency injection pattern
3. Add tests in `tests/test_*.py`

