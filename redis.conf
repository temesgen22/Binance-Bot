# Redis configuration for persistence
# This ensures data is saved to disk and survives container restarts

# Enable AOF (Append Only File) persistence - logs every write operation
appendonly yes
appendfsync everysec  # Sync to disk every second (good balance of performance and durability)

# Enable RDB snapshots as backup (saves snapshot periodically)
save 900 1      # Save if at least 1 key changed in 900 seconds (15 minutes)
save 300 10     # Save if at least 10 keys changed in 300 seconds (5 minutes)
save 60 10000   # Save if at least 10000 keys changed in 60 seconds

# Directory where Redis will write persistence files
dir /data

# RDB filename
dbfilename dump.rdb

# AOF filename
appendfilename "appendonly.aof"

# Disable protected mode for Docker (if needed)
protected-mode no

