# Redis configuration for persistence
# This ensures data is saved to disk and survives container restarts

# Disable AOF (Append Only File) - using RDB-only mode for snapshot-based backups
# RDB-only mode is simpler and more reliable for restore operations
appendonly no
# Note: appendfsync is not used when appendonly is no

# Enable RDB snapshots as backup (saves snapshot periodically)
# Save if at least 1 key changed in 900 seconds (15 minutes)
save 900 1
# Save if at least 10 keys changed in 300 seconds (5 minutes)
save 300 10
# Save if at least 10000 keys changed in 60 seconds
save 60 10000

# Directory where Redis will write persistence files
dir /data

# RDB filename
dbfilename dump.rdb

# AOF filename (not used when appendonly is no)
# appendfilename "appendonly.aof"

# Disable protected mode for Docker (if needed)
protected-mode no

